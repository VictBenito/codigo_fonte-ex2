{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "App.svelte"
  ],
  "sourcesContent": [
    "<script>\n  let mensgs = 0;\n  let numUsers = 0;\n  let eu = ''\n  let destinatarios = [];\n  let de = [];\n  let nomes = []\n\n  const ws = new WebSocket(\"ws://127.0.0.1:6789\");\n\n  import { onMount } from \"svelte\";\n\n  \n  let messageInput;\n  let palavras = [];\n  let inputText = \"\";\n\n  onMount(() => {\n    messageInput.focus();\n  });\n\n  ws.onopen = function (){\n    console.log(\"Websocket client connected\");\n    };\n\n\n  ws.onclose = function (){\n    console.log(\"Websock client disconnected\")\n  }\n\n  ws.onmessage = function (e) {\n    console.log(\"Received: \" + e.data);\n    let data = JSON.parse(e.data);\n    if (data.type == 'msg') {\n  \n      mensgs = mensgs + 1;\n      console.log(palavras)\n      palavras = [...palavras, data.msg];\n      console.log(palavras)\n      destinatarios = [...destinatarios, data.para];\n      de = [...de, data.nome]\n      inputText = \"\";\n\n    } else if (data.type == 'users') {\n      numUsers = data.count;\n\n    } else {\n      console.error(\"unsupported event\", data);\n    }\n\n  };\n\n  function handleClick() {\n    console.log(inputText)\n    if(inputText.startsWith('/nome ')){\n      ws.send(JSON.stringify({'msg':inputText.slice(6), 'para':'Todos', 'nome_certo':'False', 'normal':'False'}));\n    }\n\t\telse if(inputText.startsWith('/privado ')){\n      var priv = inputText.split(' ')\n\t\t\tvar priv2 = priv[1].length \n\t\t\tws.send(JSON.stringify({'msg':inputText.slice(priv2+9), 'para': priv[1], 'nome_certo':'True', 'normal':'False'}));\n    }\n    else if (eu != null){\n      ws.send(JSON.stringify({'msg': inputText, 'para':'Todos', 'nome_certo':'True', 'normal':'True'}));\n    }\n    else {\n\t\t\tconsole.error(\"unsupported event\", data);\n    }\n  }\n</script>\n\n<style>\n  main {\n    background-color: lawngreen;\n    width: calc(100% - 30px);\n    text-align: center;\n    padding: 1em;\n    max-width: 1240px;\n    margin: 0 auto;\n  }\n\n  * {\n    box-sizing: border-box;\n  }\n  h1 {\n    color: #000003;\n    text-transform: uppercase;\n    font-size: 4em;\n    font-weight: 100;\n  }\n  .chatbox {\n    width: 100%;\n    height: 50vh;\n    padding: 0 1em;\n    text-align: left;\n    background-color: #eee;\n    overflow-y: scroll;\n    overscroll-behavior-y: contain;\n    scroll-snap-type: y proximity;\n  }\n  .chatbox p {\n    margin-top: 0.5em;\n    margin-bottom: 0;\n    padding-bottom: 0.5em;\n  }\n  .chatbox > p:last-child {\n    scroll-snap-align: end;\n  }\n  .inputbox {\n    display: flex;\n    margin-top: 0.5em;\n  }\n  .inputbox input {\n    flex-grow: 1;\n  }\n  .state {\n    font-size: 2em;\n    font-family: Verdana;\n  }\n  .servermsg{\n    color:#ff3e00\n  }\n  .usermsg{\n    color:black\n  }\n  @media (min-width: 640px) {\n    main {\n      max-width: none;\n    }\n  }\n</style>\n\n<main>\n  <h1>Websockets Web</h1>\n\n  <div class=\"state\">\n    <span class=\"users\">Online ({numUsers})</span>\n  </div>\n\n  <div class=\"chatbox\">\n    <p class='servermsg'>(Instruções): Bem vindo ao Chat WebSockets de Redes Industriais!</p>\n    <p class='servermsg'>(Instruções): Para definir seu usúario, digite: \\nome SeuNome</p>\n    <p class='servermsg'>(Instruções): Para mandar uma mensagem privada para algum dos usuários, digite: \\privado usuário Mensagem</p>\n    {#if mensgs>1}\n      {#each palavras as palavra, i}\n        {#if de != []}\n          <p>({de[i]}): {palavra}</p>\n        {/if}\n      {/each}\n    {/if}\n  </div>\n  <form class=\"inputbox\">\n    <input type=\"text\" class=\"usermsg\" bind:this={messageInput} bind:value={inputText} />\n    \n    <button type=\"submit\" on:click|preventDefault={handleClick}>Send</button>\n  </form>\n\n</main>\n"
  ],
  "names": [],
  "mappings": "AAwEE,IAAI,8BAAC,CAAC,AACJ,gBAAgB,CAAE,SAAS,CAC3B,KAAK,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CACxB,UAAU,CAAE,MAAM,CAClB,OAAO,CAAE,GAAG,CACZ,SAAS,CAAE,MAAM,CACjB,MAAM,CAAE,CAAC,CAAC,IAAI,AAChB,CAAC,AAED,8BAAE,CAAC,AACD,UAAU,CAAE,UAAU,AACxB,CAAC,AACD,EAAE,8BAAC,CAAC,AACF,KAAK,CAAE,OAAO,CACd,cAAc,CAAE,SAAS,CACzB,SAAS,CAAE,GAAG,CACd,WAAW,CAAE,GAAG,AAClB,CAAC,AACD,QAAQ,8BAAC,CAAC,AACR,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,OAAO,CAAE,CAAC,CAAC,GAAG,CACd,UAAU,CAAE,IAAI,CAChB,gBAAgB,CAAE,IAAI,CACtB,UAAU,CAAE,MAAM,CAClB,qBAAqB,CAAE,OAAO,CAC9B,gBAAgB,CAAE,CAAC,CAAC,SAAS,AAC/B,CAAC,AACD,uBAAQ,CAAC,CAAC,eAAC,CAAC,AACV,UAAU,CAAE,KAAK,CACjB,aAAa,CAAE,CAAC,CAChB,cAAc,CAAE,KAAK,AACvB,CAAC,AACD,uBAAQ,CAAG,gBAAC,WAAW,AAAC,CAAC,AACvB,iBAAiB,CAAE,GAAG,AACxB,CAAC,AACD,SAAS,8BAAC,CAAC,AACT,OAAO,CAAE,IAAI,CACb,UAAU,CAAE,KAAK,AACnB,CAAC,AACD,wBAAS,CAAC,KAAK,eAAC,CAAC,AACf,SAAS,CAAE,CAAC,AACd,CAAC,AACD,MAAM,8BAAC,CAAC,AACN,SAAS,CAAE,GAAG,CACd,WAAW,CAAE,OAAO,AACtB,CAAC,AACD,wCAAU,CAAC,AACT,MAAM,OAAO;EACf,CAAC,AACD,sCAAQ,CAAC,AACP,MAAM,KAAK;EACb,CAAC,AACD,MAAM,AAAC,YAAY,KAAK,CAAC,AAAC,CAAC,AACzB,IAAI,8BAAC,CAAC,AACJ,SAAS,CAAE,IAAI,AACjB,CAAC,AACH,CAAC"
}